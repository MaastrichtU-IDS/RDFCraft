FROM ghcr.io/astral-sh/uv:python3.11-alpine as RDFCraftPython

WORKDIR /app

ENV DEBUG=1

# Copy the backend dependencies

COPY ./pyproject.toml ./uv.lock ./.python-version ./

# Install backend dependencies

RUN uv sync

# Copy Backend source code

COPY main.py bootstrap.py ./
COPY ./server ./server

CMD ["uv", "run", "main.py"]

EXPOSE 8080